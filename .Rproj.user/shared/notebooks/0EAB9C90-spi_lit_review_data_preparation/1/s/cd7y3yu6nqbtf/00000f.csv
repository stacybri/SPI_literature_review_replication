"0",""
"0",""
"0","start_date=2010"
"0",""
"0","correlates_df <- wb_data(country=""all"", "
"0","              indicator=c('SI.POV.DDAY', 'SI.POV.GINI'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('SI.POV.DDAY', 'SI.POV.GINI'), .direction = 'downup') %>%"
"0","  filter(date==end_date)"
"0",""
"0",""
"0","ge_df <- wb_data(country=""all"", "
"0","              indicator=c('GE.EST'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('GE.EST'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, GE.EST)"
"0",""
"0","gdp_df <- wb_data(country=""all"", "
"0","              indicator=c('NY.GDP.PCAP.KD'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('NY.GDP.PCAP.KD'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%  select(iso3c, date, NY.GDP.PCAP.KD)"
"0",""
"0","hci_df <- wb_data(country=""all"", "
"0","              indicator=c('HD.HCI.OVRL'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('HD.HCI.OVRL'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, HD.HCI.OVRL)"
"0",""
"0","undernourish_df <- wb_data(country=""all"", "
"0","              indicator=c('SN.ITK.DEFC.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('SN.ITK.DEFC.ZS'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, SN.ITK.DEFC.ZS)"
"0",""
"0","mmt_df <-  wb_data(country=""all"", "
"0","              indicator=c('SH.STA.MMRT'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('SH.STA.MMRT'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c,  SH.STA.MMRT)"
"0",""
"0",""
"0","lpov_df <-  wb_data(country=""all"", "
"0","              indicator=c('SE.LPV.PRIM'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('SE.LPV.PRIM'), .direction = 'downup') %>%"
"0","  filter(date==end_date)  %>%"
"0","  select(iso3c, date, SE.LPV.PRIM)  "
"0",""
"0",""
"0","wbl_df <- wb_data(country=""all"", "
"0","              indicator=c('SG.LAW.INDX'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('SG.LAW.INDX'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, SG.LAW.INDX)"
"0",""
"0","safely_df <- wb_data(country=""all"", "
"0","              indicator=c('SH.H2O.SMDW.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('SH.H2O.SMDW.ZS'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, SH.H2O.SMDW.ZS)"
"0","  "
"0","elect_df <- wb_data(country=""all"", "
"0","              indicator=c('EG.ELC.ACCS.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('EG.ELC.ACCS.ZS'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, EG.ELC.ACCS.ZS)"
"0","  "
"0","manuf_df <- wb_data(country=""all"", "
"0","              indicator=c('NV.IND.MANF.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('NV.IND.MANF.ZS'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, NV.IND.MANF.ZS)"
"0",""
"0",""
"0","slums_df <- wb_data(country=""all"", "
"0","              indicator=c('EN.POP.SLUM.UR.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('EN.POP.SLUM.UR.ZS'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c,  EN.POP.SLUM.UR.ZS)"
"0",""
"0","ff_sub_df <- read_csv(paste0(raw_dir, ""/Subsidies.csv"")) %>%"
"0","  rename(iso3c=code)"
"0","  "
"0",""
"0","ghg_df <- wb_data(country=""all"", "
"0","              indicator=c('EN.ATM.GHGT.KT.CE'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  right_join(spi_df_empty) %>%"
"0","  fill(c('EN.ATM.GHGT.KT.CE'), .direction = 'downup') %>%"
"0","  filter(date==end_date) %>%"
"0","  select(iso3c,  EN.ATM.GHGT.KT.CE)"
"0",""
"0","protected_df <- wb_data(country=""all"", "
"0","              indicator=c('ER.MRN.PTMR.ZS','ER.LND.PTLD.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  fill(c('ER.MRN.PTMR.ZS','ER.LND.PTLD.ZS'), .direction = 'downup') %>%"
"0",""
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, ER.MRN.PTMR.ZS,ER.LND.PTLD.ZS)"
"0",""
"0","debt_df <- wb_data(country=""all"", "
"0","              indicator=c('DT.TDS.DECT.EX.ZS'),"
"0","              start_date=start_date,"
"0","              end_date=end_date,"
"0","              ) %>% # fill forward "
"0","  group_by(country) %>%"
"0","  fill(c('DT.TDS.DECT.EX.ZS'), .direction = 'downup') %>%"
"0",""
"0","  filter(date==end_date) %>%"
"0","  select(iso3c, date, DT.TDS.DECT.EX.ZS)"
"0",""
"0","#bring in Sachs SDG index"
"0","#https://dashboards.sdgindex.org/explorer"
"0","# accessed on 2023-07-20"
"0",""
"0","sdg_index <- read_excel(path=paste0(raw_dir, ""/SDR2023-data.xlsx""),"
"0","                        sheet='Backdated SDG Index'"
"0",") %>%"
"0","  transmute(iso3c=`Country Code ISO3`,"
"0","         date=year,"
"0","         sdg_index_score=`SDG Index Score`)"
"0",""
"0","#bring it all together"
"0","correlates_df_end_date <- correlates_df %>%"
"0","  left_join(ge_df) %>%"
"0","  left_join(gdp_df) %>%"
"0","  left_join(hci_df) %>%"
"0","  left_join(undernourish_df) %>%"
"0","  left_join(mmt_df) %>%"
"0","  left_join(lpov_df) %>%"
"0","  left_join(wbl_df) %>%"
"0","  left_join(safely_df) %>%"
"0","  left_join(elect_df) %>%"
"0","  left_join(manuf_df) %>%"
"0","  left_join(slums_df) %>%"
"0","  left_join(ff_sub_df) %>%"
"0","  left_join(ghg_df) %>%"
"0","  left_join(protected_df) %>%"
"0","  left_join(debt_df) %>%"
"0","  left_join(sdg_index) %>%"
"0","  filter(region!=""Aggregates"") %>%"
"0","  select(iso3c, c('SI.POV.DDAY', 'SI.POV.GINI','GE.EST','NY.GDP.PCAP.KD','HD.HCI.OVRL','SN.ITK.DEFC.ZS','SH.STA.MMRT','SE.LPV.PRIM','SG.LAW.INDX','SH.H2O.SMDW.ZS',""EG.ELC.ACCS.ZS"",'NV.IND.MANF.ZS','EN.POP.SLUM.UR.ZS','subsidies','EN.ATM.GHGT.KT.CE','ER.MRN.PTMR.ZS','ER.LND.PTLD.ZS','DT.TDS.DECT.EX.ZS', 'sdg_index_score'))"
"0",""
"0",""
"0","sdgs <- c('SI.POV.DDAY','SN.ITK.DEFC.ZS','SH.STA.MMRT','SE.LPV.PRIM','SG.LAW.INDX',"
"0","          'SH.H2O.SMDW.ZS','EG.ELC.ACCS.ZS','NY.GDP.PCAP.KD','NV.IND.MANF.ZS','SI.POV.GINI',"
"0","          'EN.POP.SLUM.UR.ZS','subsidies','EN.ATM.GHGT.KT.CE','ER.MRN.PTMR.ZS','ER.LND.PTLD.ZS'"
"0","          ,'GE.EST','DT.TDS.DECT.EX.ZS', 'sdg_index_score')"
"0",""
"0","sdg_names <- c('SDG 1: Extreme Poverty','SDG 2: Undernourishment','SDG 3: Maternal Mortality','SDG 4: Learning Poverty','SDG 5: Women, Business, Law Index',"
"0","          'SDG 6: Safely Managed Water','SDG 7: Access to Electricity','SDG 8: GDP per capita (2015 constant $)','SDG 9: Manufacturing value added (% of GDP)','SDG 10: Gini Index',"
"0","          'SDG 11: Population in Slums','SDG 12: Fossil Fuel Subsidies (% of GDP)','SDG 13: Greenhouse Gas Emissions','SDG 14: Marine protected areas','SDG 15: Terrestrial Protected Areas','SDG 16: Government Effectiveness','SDG 17: Total Debt Service', 'SDR: SDG Index Overall Score')"
