"0","#| label: sdgcordf"
"0",""
"0",""
"0","sdgs <- c('SI.POV.DDAY','SN.ITK.DEFC.ZS','SH.STA.MMRT','SE.LPV.PRIM','SG.LAW.INDX',"
"0","          'SH.H2O.SMDW.ZS','EG.ELC.ACCS.ZS','NY.GDP.PCAP.KD','NV.IND.MANF.ZS','SI.POV.GINI',"
"0","          'EN.POP.SLUM.UR.ZS','subsidies','EN.ATM.GHGT.KT.CE','ER.MRN.PTMR.ZS','ER.LND.PTLD.ZS'"
"0","          ,'GE.EST','DT.TDS.DECT.EX.ZS', 'sdg_index_score')"
"0",""
"0","sdg_names <- c('SDG 1: Extreme Poverty','SDG 2: Undernourishment','SDG 3: Maternal Mortality','SDG 4: Learning Poverty','SDG 5: Women, Business, Law Index',"
"0","          'SDG 6: Safely Managed Water','SDG 7: Access to Electricity','SDG 8: GDP per capita (2015 constant $)','SDG 9: Manufacturing value added (% of GDP)','SDG 10: Gini Index',"
"0","          'SDG 11: Population in Slums','SDG 12: Fossil Fuel Subsidies (% of GDP)','SDG 13: Greenhouse Gas Emissions','SDG 14: Marine protected areas','SDG 15: Terrestrial Protected Areas','SDG 16: Government Effectiveness','SDG 17: Total Debt Service', 'SDR: SDG Index Overall Score')"
"0",""
"0","#get correlations with pvalues"
"0","index_cor_full <- comparison_df %>%"
"0","  select(c('SPI.INDEX', 'SCI', 'ODIN_score', 'odb', 'gdb'),sdgs) %>%"
"0","  rename("
"0","    SPI=SPI.INDEX,"
"0","    SCI=SCI, "
"0","    ODIN=ODIN_score, "
"0","    ODB=odb, "
"0","    GDB=gdb"
"0","  ) %>%"
"0","  as.matrix() %>%"
"0","  rcorr()"
"2","Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
Please use `all_of()` or `any_of()` instead.
# Was:
data %>% select(sdgs)

# Now:
data %>% select(all_of(sdgs))

See <https://tidyselect.r-lib.org/reference/faq-external-vector.html>."
"0","#get just pearon correlation"
"0","index_cor <- index_cor_full$r"
"0","index_cor <- index_cor[6:23,1:5]"
"0",""
"0",""
"0","#round"
"0","index_cor <- round(index_cor,2)"
"0",""
"0","#color"
"0","index_col <- index_cor"
"0","index_col[abs(index_cor)>=0.5] <- ""#fcca46"""
"0","index_col[abs(index_cor)>=0.65] <- ""#a1c181"""
"0","index_col[abs(index_cor)>=0.8] <- ""#619b8a"""
"0","index_col[abs(index_cor)<0.5] <- ""white"""
"0",""
"0","#get statistical significance"
"0","index_sig <- index_cor_full$P"
"0","index_sig <- index_sig[6:23,1:5]"
"0",""
"0","rownames(index_cor) <- sdg_names"
"0","rownames(index_sig) <- sdg_names "
