"0","#| label: decompstackedpltabs"
"0","#| fig-height: 8"
"0","#| fig-width: 12"
"0",""
"0",""
"0","    name <- 'SPI Overall Score'"
"0","    income <- c(""Low income"", ""Lower middle income"",""Upper middle income"",""High income"")"
"0","#absolute graph"
"0","  ggplot(decomp_stacked_df, aes(x=income, y=level, fill=Pillar, label=paste0(round(level,1)))) +"
"0","    geom_bar(stat = ""identity"", position='stack') +"
"0","    geom_text(size = 4, position = position_stack(vjust = 0.5)) +"
"0","    geom_text(aes(y=total,label=paste0('Total = ' ,round(total,1))), size=4, nudge_y=7 ) +"
"0","    scale_x_discrete() +"
"0","    theme_spi() +"
"0","    "
"0","    labs("
"0","      #title='Contribution of each Pillar to SPI overall score',"
"0","      subtitle='Each pillar receives equal 1/5th weight in overall score',"
"0","      caption=paste0(name,' scale = 0 - 100 points.')"
"0","    ) +"
"0","  scale_x_discrete(limits = income) +"
"0","    coord_flip() +"
"0","  expand_limits(y=c(0,100)) +"
"0","  theme("
"0","    axis.title.y = element_text(angle=0, vjust = 0.5),"
"0","    text = element_text(size = 12),"
"0","    title= element_text(size = 14),"
"0","    legend.position = 'bottom'"
"0","  ) +"
"0","    guides(fill=guide_legend(nrow=2,byrow=TRUE))"
"2","[38;5;255mScale for [32mx[38;5;255m is already present.
Adding another scale for [32mx[38;5;255m, which will replace the existing scale.[39m"
