"0","#get correlations with pvalues"
"0","index_cor_full <- comparison_df %>%"
"0","  select(c('gdb','odb','ODIN_score', 'SCI', 'SPI.INDEX' ),sdgs) %>%"
"0","  rename("
"0","    SPI=SPI.INDEX,"
"0","    SCI=SCI, "
"0","    ODIN=ODIN_score, "
"0","    ODB=odb, "
"0","    GDB=gdb"
"0","  ) %>%"
"0","  as.matrix() %>%"
"0","  rcorr()"
"0",""
"0","#get just pearon correlation"
"0","index_cor <- index_cor_full$r"
"0","index_cor <- index_cor[6:23,1:5]"
"0",""
"0","#get Ns"
"0","index_n <- index_cor_full$n"
"0","index_n <- index_n[6:23,1:5]"
"0",""
"0",""
"0","#round"
"0","index_cor <- round(index_cor,2)"
"0",""
"0","#color"
"0","index_col <- index_cor"
"0","index_col[abs(index_cor)>=0.5] <- ""#fcca46"""
"0","index_col[abs(index_cor)>=0.65] <- ""#a1c181"""
"0","index_col[abs(index_cor)>=0.8] <- ""#619b8a"""
"0","index_col[abs(index_cor)<0.5] <- ""white"""
"0",""
"0","#get statistical significance"
"0","index_sig <- index_cor_full$P"
"0","index_sig <- index_sig[6:23,1:5]"
"0",""
"0","rownames(index_cor) <- sdg_names"
"0","rownames(index_sig) <- sdg_names "
"0",""
"0",""
"0","tab <- as_tibble(cbind(index_cor, index_sig,var=sdg_names), .name_repair=""universal"") %>%"
"0","  mutate(across(c(1:10), as.numeric)) %>%"
"0","  mutate(SPI=case_when("
"0","            between(SPI...10,0.05,0.1) ~   paste0(SPI...5,""*""),"
"0","            between(SPI...10,0.01,0.5) ~  paste0(SPI...5,""**""),"
"0","            between(SPI...10,0.0,0.01) ~ paste0(SPI...5,""***""),"
"0","           is.na(SPI...5) ~ """","
"0","           TRUE ~      paste0(SPI...5,"""")"
"0","            ),"
"0","         SCI=case_when("
"0","           between(SCI...9,0.05,0.1) ~   paste0(SCI...4,""*""),"
"0","           between(SCI...9,0.01,0.5) ~  paste0(SCI...4,""**""),"
"0","           between(SCI...9,0.0,0.01) ~ paste0(SCI...4,""***""),"
"0","           is.na(SCI...4) ~ """","
"0","           TRUE ~      paste0(SCI...4,"""")"
"0","           ),"
"0","         ODIN=case_when("
"0","           between(ODIN...8,0.05,0.1) ~   paste0(ODIN...3,""*""),"
"0","           between(ODIN...8,0.01,0.5) ~  paste0(ODIN...3,""**""),"
"0","           between(ODIN...8,0.0,0.01) ~ paste0(ODIN...3,""***""),"
"0","           is.na(ODIN...3) ~ """","
"0","           TRUE ~      paste0(ODIN...3,"""")"
"0","         ),"
"0","         ODB=case_when("
"0","           between(ODB...7,0.05,0.1) ~   paste0(ODB...2,""*""),"
"0","           between(ODB...7,0.01,0.5) ~  paste0(ODB...2,""**""),"
"0","           between(ODB...7,0.0,0.01) ~ paste0(ODB...2,""***""),"
"0","           is.na(ODB...2) ~ """","
"0","           TRUE ~      paste0(ODB...2,"""")"
"0","         ),"
"0","         GDB=case_when("
"0","           between(GDB...6,0.05,0.1) ~   paste0(GDB...1,""*""),"
"0","           between(GDB...6,0.01,0.5) ~  paste0(GDB...1,""**""),"
"0","           between(GDB...6,0.0,0.01) ~ paste0(GDB...1,""***""),"
"0","           is.na(GDB...1) ~ """","
"0","           TRUE ~      paste0(GDB...1,"""")"
"0","         )"
"0","    ) %>% select( var,GDB, ODB, ODIN, SCI, SPI ) "
"2","New names:"
"0","  flextable(tab) %>%"
"0","  # bg(j=2,"
"0","  #      bg=index_col[,1]) %>%"
"0","  # bg(j=3,"
"0","  #      bg=index_col[,2]) %>%"
"0","  # bg(j=4,"
"0","  #      bg=index_col[,3]) %>%"
"0","  # bg(j=5,"
"0","  #      bg=index_col[,4]) %>%"
"0","  # bg(j=6,"
"0","  #      bg=index_col[,5]) %>%"
"0","  add_footer_lines("
"0","    'Note: * p<0.1,** p<0.05,*** p<0.01 '    "
"0","  ) %>%"
"0","  add_header_lines('Table. Correlation between Development Outcomes')"
