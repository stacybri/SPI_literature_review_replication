"0","#| label: regdataprep"
"0",""
"0","#this code will apply to the next 6 tables, as they rely on a constant set of predictors"
"0",""
"0","#read in predictor variables created in spi_lit_review_data_preparation.Rmd"
"0","predictors_df <- read_csv( paste0(output_dir, ""/SPI_regression_predictors.csv""))"
"2","[1mRows: [22m[34m2843[39m [1mColumns: [22m[34m27[39m"
"2","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m  (3): iso2c, iso3c, country
[32mdbl[39m (24): date, BN.CAB.XOKA.GD.ZS, BX.KLT.DINV.WD.GD.ZS, CC.EST, GE.EST, HD.HCI.OVRL, NE.TRD.GNFS.ZS, NV.AGR.TOTL.ZS, NV.I..."
"2","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message."
"0","#read in data for other indices"
"0",""
"0",""
"0","# predictors_df <- predictors_df %>%"
"0","#   left_join(imf_dta)"
"0",""
"0","SPI_2016 <- spi_index_df %>%"
"0","  filter(date>=2016) %>%"
"0","  group_by(iso3c) %>%"
"0","  fill(starts_with( 'SPI.INDEX'), .direction=""downup"") %>%"
"0","  ungroup() %>%"
"0","  filter(!is.na(SPI.INDEX))"
"0",""
"0","countries_2016 <- unique(SPI_2016$country)"
"0",""
"0","#add in some metadata about the country"
"0","reg_df <- SPI_2016 %>%"
"0","  select(country, iso3c, date, region, SPI.INDEX, SPI.INDEX.PIL1, SPI.INDEX.PIL2, SPI.INDEX.PIL3, SPI.INDEX.PIL4, SPI.INDEX.PIL5) %>%"
"0","  left_join(predictors_df) %>%"
"0","  filter(between(date,2016,2022)) %>%"
"0","  filter(!(is.na(SPI.INDEX) | "
"0","             is.na(NY.GDP.PCAP.KD) |"
"0","             is.na(NV.IND.MANF.ZS) |"
"0","             is.na(NV.AGR.TOTL.ZS) |"
"0","             is.na(SE.PRM.ENRR) |"
"0","             is.na(NE.TRD.GNFS.ZS) |"
"0","             is.na(CC.EST) |"
"0","             is.na(GE.EST) |"
"0","             is.na(PV.EST) |"
"0","             is.na(RQ.EST) |"
"0","             is.na(RL.EST) |"
"0","             is.na(VA.EST) )) %>%"
"0","  mutate(region_year_fe=paste(region,date,sep="" - ""))"
"2","Joining with `by = join_by(country, iso3c, date)`"
"0","ncountry <- length(unique(reg_df$country))"
"0",""
"0","#ODIN regressions"
"0","#add in some metadata about the country"
"0","odin_reg_df <- odin_df %>%"
"0","  select(iso3c, date, ODIN_score) %>%"
"0","  left_join(country_metadata) %>%"
"0","  left_join(predictors_df) %>%"
"0","  filter(between(date,2016,2022)) %>%"
"0","  filter(!(is.na(ODIN_score) | "
"0","             is.na(NY.GDP.PCAP.KD) |"
"0","             is.na(NV.IND.MANF.ZS) |"
"0","             is.na(NV.AGR.TOTL.ZS) |"
"0","             is.na(SE.PRM.ENRR) |"
"0","             is.na(NE.TRD.GNFS.ZS) |"
"0","             is.na(CC.EST) |"
"0","             is.na(GE.EST) |"
"0","             is.na(PV.EST) |"
"0","             is.na(RQ.EST) |"
"0","             is.na(RL.EST) |"
"0","             is.na(VA.EST) )) %>%"
"0","  mutate(region_year_fe=paste(region,date,sep="" - ""))"
"2","Joining with `by = join_by(iso3c)`"
"2","Joining with `by = join_by(iso3c, date, iso2c, country)`"
"0","#ODB Regression"
"0","odb_reg_df <- read_csv(paste0(output_dir, ""/ODB_formatted_data.csv"")) %>%"
"0","  select(iso3c, date, odb) %>%"
"0","  left_join(country_metadata) %>%"
"0","  left_join(predictors_df) %>%"
"0","  filter(between(date,2013,2022)) %>%"
"0","  filter(!(is.na(odb) | "
"0","             is.na(NY.GDP.PCAP.KD) |"
"0","             is.na(NV.IND.MANF.ZS) |"
"0","             is.na(NV.AGR.TOTL.ZS) |"
"0","             is.na(SE.PRM.ENRR) |"
"0","             is.na(NE.TRD.GNFS.ZS) |"
"0","             is.na(CC.EST) |"
"0","             is.na(GE.EST) |"
"0","             is.na(PV.EST) |"
"0","             is.na(RQ.EST) |"
"0","             is.na(RL.EST) |"
"0","             is.na(VA.EST) )) %>%"
"0","  mutate(region_year_fe=paste(region,date,sep="" - ""))"
"2","[1mRows: [22m[34m400[39m [1mColumns: [22m[34m20[39m"
"2","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m (16): iso3c, iso2c, country, capital_city, region_iso3c, region_iso2c, region, admin_region_iso3c, admin_region_iso2c,...
[32mdbl[39m  (4): date, odb, longitude, latitude"
"2","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message."
"2","Joining with `by = join_by(iso3c)`"
"2","Joining with `by = join_by(iso3c, date, iso2c, country)`"
"0","#ODB Regression"
"0","gdb_reg_df <- read_csv(paste0(output_dir, ""/GDB_formatted_data.csv"")) %>%"
"0","  select(iso3c, date, gdb) %>%"
"0","  left_join(country_metadata) %>%"
"0","  left_join(predictors_df) %>%"
"0","  filter(between(date,2016,2022)) %>%"
"0","  filter(!(is.na(gdb) | "
"0","             is.na(NY.GDP.PCAP.KD) |"
"0","             is.na(NV.IND.MANF.ZS) |"
"0","             is.na(NV.AGR.TOTL.ZS) |"
"0","             is.na(SE.PRM.ENRR) |"
"0","             is.na(NE.TRD.GNFS.ZS) |"
"0","             is.na(CC.EST) |"
"0","             is.na(GE.EST) |"
"0","             is.na(PV.EST) |"
"0","             is.na(RQ.EST) |"
"0","             is.na(RL.EST) |"
"0","             is.na(VA.EST) )) %>%"
"0","  mutate(region_year_fe=paste(region,date,sep="" - ""))"
"2","[1mRows: [22m[34m109[39m [1mColumns: [22m[34m20[39m"
"2","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m (16): iso3c, iso2c, country, capital_city, region_iso3c, region_iso2c, region, admin_region_iso3c, admin_region_iso2c,...
[32mdbl[39m  (4): date, gdb, longitude, latitude"
"2","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message."
"2","Joining with `by = join_by(iso3c)`"
"2","Joining with `by = join_by(iso3c, date, iso2c, country)`"
