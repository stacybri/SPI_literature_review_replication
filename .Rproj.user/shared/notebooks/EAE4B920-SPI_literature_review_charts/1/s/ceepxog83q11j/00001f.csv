"0","#| label: m2_spi_correlations"
"0","#| fig-width: 9"
"0","#| fig-height: 6"
"0",""
"0","corr_df <- spi_index_df %>%"
"0","  ungroup() %>%"
"0","  select(starts_with('SPI.INDEX'))"
"0",""
"0",""
"0","#calculate correlations between teacher practices"
"0","df_corr_plot <-    round(cor(corr_df, use=""complete.obs""), 2) "
"0","colnames(df_corr_plot) <- c('Data Use','Data Services','Data Products','Data Sources','Data Infrastructure','SPI Overall')"
"0","rownames(df_corr_plot) <- c('Data Use','Data Services','Data Products','Data Sources','Data Infrastructure','SPI Overall')"
"0",""
"0","#plot the correlation in a nicely formatted table"
"0","pcorr<- ggcorrplot::ggcorrplot(df_corr_plot,"
"0","                   outline.color = ""white"","
"0","                   ggtheme = theme_spi(),"
"0","                   colors = c(""#F8696B"", ""#FFEB84"", ""#63BE7B""),"
"0","                   legend.title = ""Correlation"","
"0","                   title = ""Correlation Between SPI pillars"","
"0","                   lab=T) + "
"0","  scale_x_discrete(labels = function(x) str_wrap(x, width = 12)) +"
"0","  scale_y_discrete(labels = function(x) str_wrap(x, width = 16)) +"
"0","  theme_spi() +"
"0","  theme("
"0","    text = element_text(size = 12),"
"0","    axis.text.x = element_text(angle=45,vjust=.5)"
"0","  ) +"
"0","  labs( )"
"0",""
"0","pcorr"
